/* ScrollToTopButton - inverted carousel button styling */

.button {
  position: fixed;
  /* Baseline positioning (works everywhere). */
  bottom: var(--spacing-lg);
  right: var(--spacing-md);

  /* Safe-area adjustments (ignored if env() isn't supported). */
  bottom: calc(var(--spacing-lg) + env(safe-area-inset-bottom));
  right: calc(var(--spacing-md) + env(safe-area-inset-right));
  width: 2.75rem;
  height: 2.75rem;
  border-radius: 9999px;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  background: var(--foreground);
  color: var(--background);

  box-shadow: var(--shadow-lg);
  outline: none;

  transition:
    transform var(--transition-base, 200ms) ease-out,
    opacity var(--transition-base, 200ms) ease-out,
    background-color var(--transition-base, 200ms) ease-out;

  z-index: var(--z-tooltip, 3000);
  will-change: transform, opacity;
}

.button:hover {
  opacity: 0.95;
  transform: var(--transform-scale-hover-large);
}

.button:focus-visible {
  outline: var(--border-width-base) solid var(--background);
  outline-offset: var(--focus-outline-offset);
}

.button:active {
  transform: scale(0.92);
}

.icon {
  width: 1.25rem;
  height: 1.25rem;
}

.visible {
  opacity: 0.95;
  transform: translateY(0);
  pointer-events: auto;
}

.hidden {
  opacity: 0;
  transform: translateY(0.5rem);
  pointer-events: none;
}

/* Desktop: prefer placing the button just outside the centered content container */
@supports (right: max(0px, 1px)) {
  /* Desktop: prefer placing the button just outside the centered content container */
  @media (min-width: 1024px) {
    .button {
      right: max(var(--spacing-md), calc((100vw - 1200px) / 2 - var(--spacing-md)));
      right: max(
        calc(var(--spacing-md) + env(safe-area-inset-right)),
        calc((100vw - 1200px) / 2 - var(--spacing-md) + env(safe-area-inset-right))
      );
    }
  }

  /* Large desktop: container grows to 1320px */
  @media (min-width: 1320px) {
    .button {
      right: max(var(--spacing-md), calc((100vw - 1320px) / 2 - var(--spacing-md)));
      right: max(
        calc(var(--spacing-md) + env(safe-area-inset-right)),
        calc((100vw - 1320px) / 2 - var(--spacing-md) + env(safe-area-inset-right))
      );
    }
  }
}

/* Small screens: keep it compact and overlay content safely */
@media (max-width: 640px) {
  .button {
    width: 2.5rem;
    height: 2.5rem;
    /* Baseline positioning (works everywhere). */
    bottom: var(--spacing-md);
    right: var(--spacing-md);

    /* Safe-area adjustments (ignored if env() isn't supported). */
    bottom: calc(var(--spacing-md) + env(safe-area-inset-bottom));
    right: calc(var(--spacing-md) + env(safe-area-inset-right));
  }

  .icon {
    width: 1.125rem;
    height: 1.125rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  .button {
    transition: none;
  }
}

